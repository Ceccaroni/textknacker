# PR-018: Vereinfachung ignoriert Quellsprache â€“ Ausgabe immer Deutsch

**Status:** ğŸŸ¢ Erledigt
**PrioritÃ¤t:** ğŸ”¥ Hoch
**Typ:** ğŸ› Bug
**Erstellt:** 2026-02-19
**Erledigt:** 2026-02-21

## Beschreibung
Wenn ein Text in einer anderen Sprache als Deutsch eingegeben wird, wird er trotzdem auf Deutsch vereinfacht. Die Vereinfachung muss in der **Originalsprache** des Textes erfolgen.

## Aktueller Zustand
- FranzÃ¶sischer Text eingegeben â†’ Ausgabe auf Deutsch vereinfacht
- Vermutlich betrifft das auch Italienisch, RÃ¤toromanisch und Englisch

## GewÃ¼nschter Zustand
- Text in einer der 13 unterstÃ¼tzten Sprachen â†’ Vereinfachung in derselben Sprache
- Die Sprache des Eingabetextes wird automatisch erkannt und beibehalten

## UnterstÃ¼tzte Sprachen (13)
de, fr, it, rm, en, es, pt, nl, tr, sq, mk, sr, ti

## Betroffene Dateien
- [x] `src/app/actions.ts` â€” System-Prompt / Prompt-Template fÃ¼r Vereinfachung
- [x] `src/lib/language-rules.ts` â€” NEU: Sprachspezifische Regelwerke als Prompt-Bausteine
- [x] `docs/rules/LS_ES_*.md` â€” NEU: 13 vollstÃ¤ndige Regelwerke (Dokumentation)

## Umsetzungsschritte

### Teil 1: Bug finden âœ…
- [x] Identifiziert: Der Prompt enthielt die Schweizer Rechtschreibungsregel (`ss statt ÃŸ`) als generische Regel fÃ¼r ALLE Sprachen, was Claude in Richtung Deutsch drÃ¤ngte.
- [x] Es gab keine sprachspezifischen Regelwerke â€” nur generische englische Regeln.
- [x] Die Spracherkennungsinstruktion war vorhanden aber zu schwach gegenÃ¼ber dem deutschen Bias.

### Teil 2: Mehrsprachige Regelwerke âœ…
- [x] User hat 13 Regelwerke geliefert (DE, FR-CH, IT-CH, RM-CH, EN-CH, ES, PT, NL, TR, SQ, MK, SR, TI)
- [x] Regelwerke in `docs/rules/` abgelegt (vollstÃ¤ndige Dokumentation)
- [x] `src/lib/language-rules.ts` erstellt: Kondensierte Prompt-Bausteine aus Section 7 jeder Datei
- [x] `actions.ts` refaktoriert:
  - System-Prompt enthÃ¤lt jetzt ALLE 13 sprachspezifischen Regelwerke
  - Schweizer Rechtschreibung nur noch in den `de`-Regeln (nicht mehr generisch)
  - Spracherkennungsinstruktion verstÃ¤rkt (4-Schritte-Prozess)
  - Generische Regeln als Baseline behalten, sprachspezifische Ã¼berschreiben wo nÃ¶tig

### Teil 3: Testen âœ…
- [x] User bestÃ¤tigt: Â«das vereinfachen funktioniert in allen sprachenÂ» (2026-02-21)
- [x] Arabisch getestet und funktioniert (auch Sprachen ausserhalb der 13 unterstÃ¼tzten)

## Notizen
- Build lÃ¤uft erfolgreich durch (npm run build âœ…)
- Die 13 Regelwerke wurden vom User erstellt und als MD-Dateien geliefert
- Jede Sprache hat ein eigenes Regelset fÃ¼r Leichte Sprache UND Einfache Sprache
- Die kondensierten Regeln in `language-rules.ts` sind in der jeweiligen Zielsprache geschrieben, um Claude in den richtigen Sprachmodus zu versetzen
